"use strict";

exports.__esModule = true;
exports.useFocusOnPointerDown = useFocusOnPointerDown;

var _utils = require("@chakra-ui/utils");

var _usePointerEvent = require("./use-pointer-event");

/**
 * Polyfill to get `relatedTarget` working correctly consistently
 * across all browsers.
 *
 * It ensures that elements receives focus on pointer down if
 * it's not the active active element.
 *
 * @internal
 */
function useFocusOnPointerDown(props) {
  var doc = props.doc,
      elements = props.elements;
  var isSafari = (0, _utils.detectBrowser)("Safari");
  (0, _usePointerEvent.usePointerEvent)(doc, "pointerdown", function (event) {
    if (!isSafari) return;
    var target = event.target;
    var isValidTarget = elements.some(function (element) {
      if ((0, _utils.isRefObject)(element)) {
        return target === element.current;
      }

      return target === element;
    });

    if (!(0, _utils.isActiveElement)(target) && isValidTarget) {
      (0, _utils.focus)(target);
    }
  });
}
//# sourceMappingURL=use-focus-on-pointerdown.js.map