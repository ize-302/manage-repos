{"version":3,"sources":["../../src/use-focus-on-pointerdown.ts"],"names":["detectBrowser","focus","isActiveElement","isRefObject","usePointerEvent","useFocusOnPointerDown","props","doc","elements","isSafari","event","target","isValidTarget","some","element","current"],"mappings":"AAAA,SACEA,aADF,EAEEC,KAFF,EAGEC,eAHF,EAIEC,WAJF,QAKO,kBALP;AAOA,SAASC,eAAT,QAAgC,qBAAhC;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,qBAAT,CAA+BC,KAA/B,EAAgE;AACrE,MAAM;AAAEC,IAAAA,GAAF;AAAOC,IAAAA;AAAP,MAAoBF,KAA1B;AAEA,MAAMG,QAAQ,GAAGT,aAAa,CAAC,QAAD,CAA9B;AAEAI,EAAAA,eAAe,CAACG,GAAD,EAAM,aAAN,EAAsBG,KAAD,IAAW;AAC7C,QAAI,CAACD,QAAL,EAAe;AACf,QAAME,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,QAAMC,aAAa,GAAGJ,QAAQ,CAACK,IAAT,CAAeC,OAAD,IAAa;AAC/C,UAAIX,WAAW,CAACW,OAAD,CAAf,EAA0B;AACxB,eAAOH,MAAM,KAAKG,OAAO,CAACC,OAA1B;AACD;;AACD,aAAOJ,MAAM,KAAKG,OAAlB;AACD,KALqB,CAAtB;;AAOA,QAAI,CAACZ,eAAe,CAACS,MAAD,CAAhB,IAA4BC,aAAhC,EAA+C;AAC7CX,MAAAA,KAAK,CAACU,MAAD,CAAL;AACD;AACF,GAbc,CAAf;AAcD","sourcesContent":["import {\n  detectBrowser,\n  focus,\n  isActiveElement,\n  isRefObject,\n} from \"@chakra-ui/utils\"\nimport { RefObject } from \"react\"\nimport { usePointerEvent } from \"./use-pointer-event\"\n\nexport interface UseFocusOnMouseDownProps {\n  doc: Document | null\n  elements: Array<RefObject<HTMLElement> | HTMLElement | null>\n}\n\n/**\n * Polyfill to get `relatedTarget` working correctly consistently\n * across all browsers.\n *\n * It ensures that elements receives focus on pointer down if\n * it's not the active active element.\n *\n * @internal\n */\nexport function useFocusOnPointerDown(props: UseFocusOnMouseDownProps) {\n  const { doc, elements } = props\n\n  const isSafari = detectBrowser(\"Safari\")\n\n  usePointerEvent(doc, \"pointerdown\", (event) => {\n    if (!isSafari) return\n    const target = event.target as HTMLElement\n    const isValidTarget = elements.some((element) => {\n      if (isRefObject(element)) {\n        return target === element.current\n      }\n      return target === element\n    })\n\n    if (!isActiveElement(target) && isValidTarget) {\n      focus(target)\n    }\n  })\n}\n"],"file":"use-focus-on-pointerdown.js"}