{"version":3,"sources":["../../src/function.ts"],"names":["isFunction","__DEV__","__TEST__","runIfFn","valueOrFn","args","callAllHandlers","fns","func","event","some","fn","defaultPrevented","callAll","mergedFn","arg","forEach","compose","fn1","reduce","f1","f2","once","result","apply","noop","warn","options","condition","message","console","error","promiseMicrotask","callback","Promise","resolve","then","scheduleMicrotask","queueMicrotask"],"mappings":"AAAA;AACA,SAASA,UAAT,EAAqBC,OAArB,EAA8BC,QAA9B,QAA8C,aAA9C;AAGA,OAAO,SAASC,OAAT,CACLC,SADK,EAGF;AAAA,oCADAC,IACA;AADAA,IAAAA,IACA;AAAA;;AACH,SAAOL,UAAU,CAACI,SAAD,CAAV,GAAwBA,SAAS,CAAC,GAAGC,IAAJ,CAAjC,GAA6CD,SAApD;AACD;AAED,OAAO,SAASE,eAAT,GAEL;AAAA,qCADGC,GACH;AADGA,IAAAA,GACH;AAAA;;AACA,SAAO,SAASC,IAAT,CAAcC,KAAd,EAA8C;AACnDF,IAAAA,GAAG,CAACG,IAAJ,CAAUC,EAAD,IAAQ;AACfA,MAAAA,EAAE,QAAF,YAAAA,EAAE,CAAGF,KAAH,CAAF;AACA,aAAOA,KAAP,oBAAOA,KAAK,CAAEG,gBAAd;AACD,KAHD;AAID,GALD;AAMD;AAED,OAAO,SAASC,OAAT,GAAmE;AAAA,qCAAxBN,GAAwB;AAAxBA,IAAAA,GAAwB;AAAA;;AACxE,SAAO,SAASO,QAAT,CAAkBC,GAAlB,EAAgD;AACrDR,IAAAA,GAAG,CAACS,OAAJ,CAAaL,EAAD,IAAQ;AAClBA,MAAAA,EAAE,QAAF,YAAAA,EAAE,CAAGI,GAAH,CAAF;AACD,KAFD;AAGD,GAJD;AAKD;AAED,OAAO,IAAME,OAAO,GAAG,SAAVA,OAAU,CACrBC,GADqB;AAAA,qCAElBX,GAFkB;AAElBA,IAAAA,GAFkB;AAAA;;AAAA,SAGlBA,GAAG,CAACY,MAAJ,CAAW,CAACC,EAAD,EAAKC,EAAL,KAAY;AAAA,WAAaD,EAAE,CAACC,EAAE,CAAC,YAAD,CAAH,CAAf;AAAA,GAAvB,EAAqDH,GAArD,CAHkB;AAAA,CAAhB;AAKP,OAAO,SAASI,IAAT,CAAqCX,EAArC,EAAoD;AACzD,MAAIY,MAAJ;AAEA,SAAO,SAASf,IAAT,GAAiD;AACtD,QAAIG,EAAJ,EAAQ;AAAA,yCADyBN,IACzB;AADyBA,QAAAA,IACzB;AAAA;;AACNkB,MAAAA,MAAM,GAAGZ,EAAE,CAACa,KAAH,CAAS,IAAT,EAAenB,IAAf,CAAT;AACAM,MAAAA,EAAE,GAAG,IAAL;AACD;;AAED,WAAOY,MAAP;AACD,GAPD;AAQD;AAED,OAAO,IAAME,IAAI,GAAG,MAAM,CAAE,CAArB;AAOP,OAAO,IAAMC,IAAI,GAAGJ,IAAI,CAAEK,OAAD,IAA6B,MAAM;AAC1D,MAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAAyBF,OAA/B;;AACA,MAAIC,SAAS,IAAI3B,OAAjB,EAA0B;AACxB6B,IAAAA,OAAO,CAACJ,IAAR,CAAaG,OAAb;AACD;AACF,CALuB,CAAjB;AAOP,OAAO,IAAME,KAAK,GAAGT,IAAI,CAAEK,OAAD,IAA6B,MAAM;AAC3D,MAAM;AAAEC,IAAAA,SAAF;AAAaC,IAAAA;AAAb,MAAyBF,OAA/B;;AACA,MAAIC,SAAS,IAAI3B,OAAjB,EAA0B;AACxB6B,IAAAA,OAAO,CAACC,KAAR,CAAcF,OAAd;AACD;AACF,CALwB,CAAlB;;AAOP,IAAMG,gBAAgB,GAAIC,QAAD,IAA4B;AACnDC,EAAAA,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuBH,QAAvB;AACD,CAFD;;AAIA,OAAO,IAAMI,iBAAiB,GAAGnC,QAAQ,GACpCS,EAAD,IAAsBA,EAAE,EADa,GAErC,OAAO2B,cAAP,KAA0B,UAA1B,GACAA,cADA,GAEAN,gBAJG","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { isFunction, __DEV__, __TEST__ } from \"./assertion\"\nimport { AnyFunction, FunctionArguments } from \"./types\"\n\nexport function runIfFn<T, U>(\n  valueOrFn: T | ((...fnArgs: U[]) => T),\n  ...args: U[]\n): T {\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn\n}\n\nexport function callAllHandlers<T extends (event: any) => void>(\n  ...fns: (T | undefined)[]\n) {\n  return function func(event: FunctionArguments<T>[0]) {\n    fns.some((fn) => {\n      fn?.(event)\n      return event?.defaultPrevented\n    })\n  }\n}\n\nexport function callAll<T extends AnyFunction>(...fns: (T | undefined)[]) {\n  return function mergedFn(arg: FunctionArguments<T>[0]) {\n    fns.forEach((fn) => {\n      fn?.(arg)\n    })\n  }\n}\n\nexport const compose = <T>(\n  fn1: (...args: T[]) => T,\n  ...fns: Array<(...args: T[]) => T>\n) => fns.reduce((f1, f2) => (...args) => f1(f2(...args)), fn1)\n\nexport function once<T extends AnyFunction>(fn?: T | null) {\n  let result: any\n\n  return function func(this: any, ...args: Parameters<T>) {\n    if (fn) {\n      result = fn.apply(this, args)\n      fn = null\n    }\n\n    return result\n  }\n}\n\nexport const noop = () => {}\n\ntype MessageOptions = {\n  condition: boolean\n  message: string\n}\n\nexport const warn = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.warn(message)\n  }\n})\n\nexport const error = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.error(message)\n  }\n})\n\nconst promiseMicrotask = (callback: VoidFunction) => {\n  Promise.resolve().then(callback)\n}\n\nexport const scheduleMicrotask = __TEST__\n  ? (fn: VoidFunction) => fn()\n  : typeof queueMicrotask === \"function\"\n  ? queueMicrotask\n  : promiseMicrotask\n"],"file":"function.js"}